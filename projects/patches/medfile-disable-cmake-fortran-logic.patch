From e4e67937a57cf213703222bbced988d53a0c71cd Mon Sep 17 00:00:00 2001
From: Mathieu Westphal <mathieu.westphal@kitware.com>
Date: Tue, 6 Jun 2023 17:59:53 +0200
Subject: [PATCH] disable cmake fortran logic

---
 CMakeLists.txt                     |  2 +-
 config/cmake_files/medMacros.cmake | 12 ++++++------
 src/CMakeLists.txt                 |  6 +++---
 3 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 1c12d46..116bf40 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -171,7 +171,7 @@ ENDIF()
 # Add all targets to the build-tree export set if we are *not*  
 # built as a sub-folder of a bigger project.
 IF(NOT _BUILT_AS_SUB)
-  IF(CMAKE_Fortran_COMPILER_WORKS)
+  IF(FALSE)
     SET(_fortLib med medfwrap)
     SET(_fortLibS med_static medfwrap_static)
   ELSE()
diff --git a/config/cmake_files/medMacros.cmake b/config/cmake_files/medMacros.cmake
index 992103e..e04a300 100644
--- a/config/cmake_files/medMacros.cmake
+++ b/config/cmake_files/medMacros.cmake
@@ -1,7 +1,7 @@
 INCLUDE(CheckIncludeFile)
-IF(CMAKE_Fortran_COMPILER_WORKS)
+IF(FALSE)
   INCLUDE(FortranCInterface)
-ENDIF(CMAKE_Fortran_COMPILER_WORKS)
+ENDIF(FALSE)
 INCLUDE(CheckFunctionExists)
 INCLUDE(CheckTypeSize)
 
@@ -277,7 +277,7 @@ ENDMACRO(MED_CHECK_SIZE)
 ## Macro to get C <-> Fortran mangling
 ###############################################################################
 MACRO(MED_C_FORTRAN_INTERFACE)
-IF(CMAKE_Fortran_COMPILER_WORKS)
+IF(FALSE)
   FortranCInterface_HEADER(${PROJECT_BINARY_DIR}/include/FC.h)
   FILE(READ ${PROJECT_BINARY_DIR}/include/FC.h f_content)
   STRING(REPLACE "\n" ";" list_f_content ${f_content})
@@ -292,11 +292,11 @@ IF(CMAKE_Fortran_COMPILER_WORKS)
     ENDIF()
   ENDFOREACH(ln ${list_f_content})
 
-ELSE(CMAKE_Fortran_COMPILER_WORKS)
+ELSE(FALSE)
 
     SET(F77_FUNC "(name,NAME) NAME")
 
-ENDIF(CMAKE_Fortran_COMPILER_WORKS)
+ENDIF(FALSE)
 
 ENDMACRO(MED_C_FORTRAN_INTERFACE)
 
@@ -427,7 +427,7 @@ MACRO(MED_FIND_MPI)
     # Gather all MPI libs in one place:
     SET(MPI_LIBS ${MPI_CXX_LIBRARIES})
     LIST(APPEND MPI_LIBS ${MPI_C_LIBRARIES})
-    IF(CMAKE_Fortran_COMPILER_WORKS)
+    IF(FALSE)
        LIST(APPEND MPI_LIBS ${MPI_Fortran_LIBRARIES})
     ENDIF()
     MESSAGE(STATUS "MPI libs: ${MPI_LIBS}")
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index d051c60..e5341ec 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -24,7 +24,7 @@ ADD_SUBDIRECTORY(hdfi)
 ADD_SUBDIRECTORY(ci)
 ADD_SUBDIRECTORY(misc)
 
-IF(CMAKE_Fortran_COMPILER_WORKS)
+IF(FALSE)
   # Build intermediate targets _cfi, _cfi_static and _fi:
   ADD_SUBDIRECTORY(cfi)
   ADD_SUBDIRECTORY(fi)
@@ -106,7 +106,7 @@ ENDIF()
 
 ########################### Fortran stuff ###################################
 #############################################################################
-IF(CMAKE_Fortran_COMPILER_WORKS)
+IF(FALSE)
   
   ######### Shared Libraries ##########
   IF(MEDFILE_BUILD_SHARED_LIBS)
@@ -152,4 +152,4 @@ IF(CMAKE_Fortran_COMPILER_WORKS)
     INSTALL(TARGETS med_static EXPORT ${_export_group} DESTINATION lib${LIB_SUFFIX})
   ENDIF()
   
-ENDIF(CMAKE_Fortran_COMPILER_WORKS)
+ENDIF(FALSE)
-- 
2.40.1

